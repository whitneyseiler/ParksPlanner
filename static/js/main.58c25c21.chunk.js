(this["webpackJsonpparks-planner"]=this["webpackJsonpparks-planner"]||[]).push([[0],{19:function(e,a,t){e.exports=t(65)},65:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(11),i=t.n(o),s=t(15),l=t(16),c=t(8),u=t(18),d=t(17),p=t(4),m=t.n(p),f=function(){return r.a.createElement("section",{className:"mapContainer"},r.a.createElement("div",{className:"map-overlay"},r.a.createElement("div",{id:"feature-listing",className:"listing"})),r.a.createElement("div",{id:"map"}))},g=(t(24),function(e){var a=e.clearSearch;return r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("form",null,r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{id:"feature-filter",type:"search",autoComplete:"off"}),r.a.createElement("label",{className:"label-icon",htmlFor:"search"},r.a.createElement("i",{className:"material-icons"},"search")),r.a.createElement("i",{className:"material-icons",onClick:function(){return a()}},"close"))))});m.a.accessToken="pk.eyJ1Ijoid2hpdG5leXNlaWxlciIsImEiOiJjamxxNWo4cXkyY2RzM3dzNnljdGkzNDB2In0.wR0jz3YiwL-UHC7OtUSMHQ";var h=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).state={lng:5,lat:34,zoom:2,visited:[]},n.map=null,n.renderListing=n.renderListings.bind(Object(c.a)(n)),n}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.renderMap()}},{key:"renderMap",value:function(){var e=this,a=[],t=document.getElementById("feature-filter"),n=new m.a.Map({container:"map",style:"mapbox://styles/whitneyseiler/ckejl2wga0fif19pfp7ri2jwl",center:[-100.486052,37.830348],zoom:3});this.map=n,n.on("load",(function(){n.loadImage("https://api.mapbox.com/v4/marker/pin-m-park+609321.png?access_token=pk.eyJ1IjoibnBzIiwiYSI6IkdfeS1OY1UifQ.K8Qn5ojTw4RV1GwBlsci-Q",(function(e,a){if(e)throw e;n.addImage("custom-marker",a)})),n.addControl(new m.a.NavigationControl),n.addControl(new m.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),n.addSource("dem",{type:"raster-dem",url:"mapbox://mapbox.terrain-rgb"}),n.addLayer({id:"hillshading",source:"dem",type:"hillshade"}),n.addSource("parks-boundaries",{type:"geojson",data:"https://gist.githubusercontent.com/erincaughey/2f221501645757e28b715c4063e87595/raw/a90be1b434b1a8cdf71c2abc3373ca63987e2d23/nps-geo-boundary.json"}),n.addSource("parks-markers",{type:"geojson",data:"https://opendata.arcgis.com/datasets/c8d60ffcbf5c4030a17762fe10e81c6a_0.geojson"}),n.addLayer({id:"boundaries",type:"fill",source:"parks-boundaries",paint:{"fill-color":"#527E5B","fill-opacity":.4},filter:["==","$type","Polygon"]}),n.addLayer({id:"markers",type:"symbol",source:"parks-markers",filter:["==",["get","UNIT_TYPE"],"National Park"],layout:{"icon-image":"custom-marker","icon-padding":0,"icon-allow-overlap":!0,"icon-size":.75},paint:{"icon-color":"red"}}),n.on("moveend",(function(){var r=n.queryRenderedFeatures({layers:["markers"]});if(r){var o=e.getUniqueFeatures(r,"UNIT_NAME");e.renderListings(o),t.value="",a=o}})),n.on("click","markers",(function(e){for(var a=e.features[0].geometry.coordinates.slice(),t=e.features[0].properties.UNIT_NAME,r=e.features[0].properties.UNIT_CODE;Math.abs(e.lngLat.lng-a[0])>180;)a[0]+=e.lngLat.lng>a[0]?360:-360;(new m.a.Popup).setLngLat(a).setHTML('<a href="http://nps.gov/'.concat(r,'">').concat(t,"</a>")).addTo(n)})),n.on("mouseenter","markers",(function(){n.getCanvas().style.cursor="pointer"})),n.on("mouseleave","markers",(function(){n.getCanvas().style.cursor=""})),t.addEventListener("keyup",(function(t){var r=t.target.value,o=a.filter((function(e){return e.properties.UNIT_NAME.indexOf(r)>-1}));e.renderListings(o),o.length&&n.setFilter("markers",["match",["get","UNIT_NAME"],o.map((function(e){return e.properties.UNIT_NAME})),!0,!1])})),e.renderListings(a)}))}},{key:"getUniqueFeatures",value:function(e,a){var t={};return e.filter((function(e){return!t[e.properties[a]]&&(t[e.properties[a]]=!0,!0)}))}},{key:"renderListings",value:function(e){var a=this,t=document.getElementById("feature-filter"),n=document.getElementById("feature-listing"),r=new m.a.Popup({closeButton:!1}),o=document.createElement("p");n.innerHTML="",e.length?(e.forEach((function(e){var t=e.properties,o=document.createElement("a");o.href="http://nps.gov/".concat(t.UNIT_CODE),o.textContent=t.UNIT_NAME,o.target="_blank",o.addEventListener("mouseover",(function(){r.setLngLat(e.geometry.coordinates).setText(e.properties.UNIT_NAME).addTo(a.map)})),n.appendChild(o)})),t.parentNode.style.display="block"):0===e.length&&""!==t.value?(o.textContent="No results found",n.appendChild(o)):(o.textContent="Drag the map to populate results",n.appendChild(o),t.parentNode.style.display="none",this.map.setFilter("markers",["has","UNIT_TYPE"]))}},{key:"handleClearSearch",value:function(){document.getElementById("feature-filter").value="",this.renderMap()}},{key:"render",value:function(){var e=this;return r.a.createElement("main",{className:"main"},r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"brand-logo center",onClick:function(){return window.location.reload()}},"Parks Planner"),r.a.createElement("h4",null,"\u201cI haven\u2019t been everywhere, but it\u2019s on my list.\u201d - Susan Sontag"),r.a.createElement("nav",null,r.a.createElement(g,{clearSearch:function(){return e.handleClearSearch(e)}}))),r.a.createElement(f,null))}}]),t}(r.a.Component);i.a.render(r.a.createElement(h,null),document.getElementById("app"))}},[[19,1,2]]]);
//# sourceMappingURL=main.58c25c21.chunk.js.map